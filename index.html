<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="en">
<!--<![endif]-->

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">

    <title>GV | Documentation by Guido Vera</title>

    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/stroke.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/animate.css">
    <link rel="stylesheet" type="text/css" href="css/prettyPhoto.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">

    <link rel="stylesheet" type="text/css" href="js/syntax-highlighter/styles/shCore.css" media="all">
    <link rel="stylesheet" type="text/css" href="js/syntax-highlighter/styles/shThemeRDark.css" media="all">

    <!-- CUSTOM -->
    <link rel="stylesheet" type="text/css" href="css/custom.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <div id="wrapper">

        <div class="container">

            <section id="top" class="section docs-heading">

                <div class="row">
                    <div class="col-md-12">
                        <div class="big-title text-center">
                            <img src="images/logo.png" alt="" width="150" height="150" />
                            <p class="lead">GV framework documentation version 1.4</p>
                        </div>
                        <!-- end title -->
                    </div>
                    <!-- end 12 -->
                </div>
                <!-- end row -->

                <hr>

            </section>
            <!-- end section -->

            <div class="row">

                <div class="col-md-3">
                    <nav class="docs-sidebar" data-spy="affix" data-offset-top="300" data-offset-bottom="200" role="navigation">
                        <ul class="nav">
                            <li> <a href="#top"> <img src="images/logo.png" width="24" height="24" alt=""> </a></li>
                            <li><a href="#line1">Getting Started</a></li>
                            <li><a href="#line2">How to Install GV</a></li>
                            <li><a href="#line3">gvconsole + docker <3 </a>
                              <ul class="nav">
                                  <li><a href="#line3_1">Manage cache</a></li>
                                  <li><a href="#line3_2">Create Controllers</a></li>
                                  <li><a href="#line3_3">Creating Models</a></li>
                                  <li><a href="#line3_4">Database management</a></li>
                                  <li><a href="#line3_5">Unit tests</a></li>
                                  <li><a href="#line3_6">Using scheduled tasks</a></li>
                                  <li><a href="#line3_7">Entering in a container</a></li>
                              </ul>
                            </li>
                            <li><a href="#line4">How to's</a>
                              <ul class="nav">
                                  <li><a href="#line4_0">Validate input on of your request</a></li>
                                  <li><a href="#line4_1">Validate a field</a></li>
                                  <li><a href="#line4_2">Manage Http handling</a></li>
                                  <li><a href="#line4_3">Use an event</a></li>
                                  <li><a href="#line4_4">Create a command</a></li>
                                  <li><a href="#line4_5">Unit test</a></li>
                                  <li><a href="#line4_6">Configue your project</a></li>
                                  <li><a href="#line4_7">Overwrite a route</a></li>
                                  <li><a href="#line4_8">Return specific HTTP response headers</a></li>
                                  <li><a href="#line4_9">One try catch to rule them all</a></li>
                                  <li><a href="#line4_10">Generate your own fractal transformer</a></li>
                                  <li><a href="#line4_11">Use throttling</a></li>
                              </ul>
                            </li>
                            <li><a href="#line5">Debbuging a gv application</a></li>
                            <li><a href="#line6">Best practices</a></li>
                            <li><a href="#line7">Depency Injection</a></li>
                            <li><a href="#line8">Who I am</a></li>
                            <!--li><a href="#line7">Revolution Slider</a></li>
                            <li><a href="#line8">How to Use Option Panel</a>
                                <ul class="nav">
                                    <li><a href="#line7_1">General Options</a></li>
                                    <li><a href="#line7_2">Style Options</a></li>
                                    <li><a href="#line7_3">Header Options</a></li>
                                    <li><a href="#line7_4">Font Options</a></li>
                                    <li><a href="#line7_5">Slider Options</a></li>
                                    <li><a href="#line7_6">Page Options</a></li>
                                    <li><a href="#line7_7">Import & Export</a></li>
                                </ul>
                            </li>
                            <li><a href="#line8">Support Desk</a></li>
                            <li><a href="#line9">Files & Sources</a></li>
                            <li><a href="#line10">Version History (Changelog)</a></li>
                            <li><a href="#line11">Copyright and license</a></li-->
                        </ul>
                    </nav >
                </div>
                <div class="col-md-9">
                    <section class="welcome">

                        <div class="row">
                            <div class="col-md-12 left-align">
                                <h2 class="dark-text">Introduction<hr></h2>
                                <div class="row">

                                    <div class="col-md-12 full">
                                        <div class="intro1">
                                            <ul>
                                                <li><strong>Name : </strong>GV</li>
                                                <li><strong>Version : </strong>1.0</li>
                                                <li><strong>Author  : </strong> <a href="https://www.linkedin.com/in/guidovera/" target="_blank">Guido Vera</a></li>
                                                <li><strong>License : </strong> <a href="#" target="_blank">MIT</a></li>
                                            </ul>
                                        </div>

                                        <hr>
                                        <div>
                                            <p>Thanks for using GV framework!
                                                <strong>You are awesome!</strong>
                                                <br> The goal of GV is to create web services or web sites as fast and robust as possible, following the convention over configuration technique, Hexagonal architecture patterns and market standards.
                                            </p>
                                            <p>Through this documentation I assume that you have some knowdledge of PHP, usage of the command line, and databases in general.</p>
                                            <p>This documentation is to help you regarding each step of your development. Please go through the documentation carefully to understand how this framework was made and how to use it. </p>

                                            <h4>Requirements</h4>
                                            <p>You will need the following dependencies to make GV work.</p>
                                            <ol>
                                                <li><a href="https://docs.docker.com/engine/installation/" target="_blank">docker</a></li>
                                                <li><a href="https://github.com/docker/compose" target="_blank">docker-compose</a></li>
                                            </ol>
                                            <div class="intro2 clearfix">
                                                <p><i class="fa fa-exclamation-triangle"></i> Docker will create all the containers needed for GV to work as fast as possible
                                                  <br/> You can still install everything manually, and the information for it will be provided.
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <!-- end row -->
                            </div>
                        </div>
                    </section>

                    <section id="line1" class="section">

                        <div class="row">
                            <div class="col-md-12 left-align">
                                <h2 class="dark-text">Getting Started <a href="#top">#back to top</a><hr></h2>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                        <div class="row">
                            <div class="col-md-12">
                                <p>GV is composed by a lot of pieces, among them you will find:</p>

                                <ol>
                                    <li>A set of rules based on convention over configuration</li>
                                    <li>A validation strategy</li>
                                    <li>Authentication strategies (Basic, JWT and Session in place)</li>
                                    <li>User management</li>
                                    <li>Http handling</li>
                                    <li>Shell scripts + ORM management through CLI</li>
                                    <li>An event mechanism</li>
                                    <li>Command pattern in place</li>
                                    <li>Transformers to serialize your objects, your way</li>
                                    <li>Throttling</li>
                                    <li>Cron management</li>
                                    <li>Dependency injection</li>
                                    <li>Locale management</li>
                                    <li>A set of utils for: email sending, pagination, file manamgent</li>
                                    <li>Unit tests</li>
                                    <li>Swagger / Swagger UI</li>
                                    <li>Only one configuration file with only a few REALLY needed lines</li>
                                    <li>A specific routing system, with the possibility of overwriting</li>
                                </ol>

                                <p>We will cover everything on this page, so, dont be worried about fancy wording.</p>

                                <h4>A deserved mention for all the open source projects that GV uses:</h4>

                                <ul>
                                    <li><a href="http://www.doctrine-project.org/" rel="nofollow">Doctrine's ORM</a> - Perfect ORM for the project!</li>
                                    <li><a href="https://twig.sensiolabs.org/" rel="nofollow">Twig templating</a> - The flexible, fast, and secure
                                    template engine for PHP</li>
                                    <li><a href="https://redis.io/" rel="nofollow">Redis cache</a> - With <a href="https://github.com/nrk/predis">PRedis</a> client.</li>
                                    <li><a href="https://phpunit.de/" rel="nofollow">PHP Unit</a> - Unit tests suite.</li>
                                    <li><a href="https://github.com/Seldaek/monolog">Monolog</a> - Logging system</li>
                                    <li><a href="https://github.com/PHPMailer/PHPMailer">PhpMailer</a> - Mail class</li>
                                    <li><a href="https://github.com/TiBeN/CrontabManager">Cron manager</a></li>
                                    <li><a href="https://github.com/squizlabs/PHP_CodeSniffer">Code sniffer</a></li>
                                    <li> <a href="https://github.com/surjithctly/documentation-html-template">HTML documentation template</a></li>
                                </ul>

                                <p>And of course GV itself is open source with a <a href="https://github.com/veraguido/gv">public repository</a> on GitHub.</p>

                                <p>Before we go into the installation process, lets be sure that you have the required software installed</p>
                                <pre class="brush: html; highlight: [2,4]">
                                    docker -v
                                </pre>
                                <pre class="brush: html; highlight: [2,4]">
                                    docker-compose -v
                                </pre>
                                <pre class="brush: html; highlight: [2,4]">
                                    git --version
                                </pre>

                                If the output of those commands are ok, you are ready to start :)
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                    </section>
                    <!-- end section -->

                    <section id="line2" class="section">

                        <div class="row">
                            <div class="col-md-12 left-align">
                                <h2 class="dark-text">How to Install GV <a href="#top">#back to top</a><hr></h2>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                        <div class="intro2 clearfix">
                            <p><i class="fa fa-exclamation-triangle"></i> There are two ways of using GV, through docker and manually.
                                <br> Please read more about docker <a href="https://www.docker.com/">here</a>. </p>
                        </div>

                        <hr>
                        <p>Before we start, clone GV repository into any directory that you would like to work, for instance:</p>
                        <pre class="brush: html">
                          $> mkdir repos
                          $> git clone git@github.com:veraguido/gv.git
                        </pre>
                        <br/>
                        <p>Or if you use composer, just do:</p>
                        <pre class="brush: html">
                          $> composer create-project gvera/gv
                        </pre>
                        <br/>
                        <br/>
                        <br/>
                        <h4>1) Using docker</h4>
                        <p>We are ready to generate our 4 docker containers now, those are going to be separated in: nginx, php, mysql and redis</p>
                        <p>Place yourself in the root folder of GV and run:</p>
                        <pre class="brush: html">
                          $> ./gvconsole build
                        </pre>

                        <br/>
                        <br/>
                        <p>After the command is finished, our containers are ready to be started:</p>
                        <pre class="brush: html">
                          $> ./gvconsole up
                        </pre>
                        <br/>
                        <br/>
                        <p>Provision your database:</p>
                        <pre class="brush: html">
                          ./gvconsole doctrine orm:schema-tool:create
                        </pre>
                        <p>Now navigate to localhost:8089 in your browser to check if the installation was successful. You should be able to see the welcome json object indicating the version of GV and the cache that is being used.</p>

                        <h4>2) Manual installation (Only if you don't want to use docker) <a href="#line3">#goto next section</a> <a href="#top">#back to top</a></h4>
                        <p>Be sure to install: the web server of your choice, php, composer, mysql and redis.</p>
                        <p>Configure your web server's virtual hosts to point all its requests to public/index.php which is the application's entry point</p>
                        <p>go to config/config.yml and configure your app to change your database's credentials</p>

                        <hr>
                    </section>
                    <!-- end section -->

                    <section id="line3" class="section">

                        <div class="row">
                            <div class="col-md-12 left-align">
                                <h2 class="dark-text">gvconsole + docker <3 <a href="#top">#back to top</a>
                                </h2>
                                <p>gvconsole is a shell script that will lead you thorugh all the administration options.</p>
                                <p>The idea is to manage everything through gvconsole {available_command}</p>
                                <p>For starting, let's list all the possible commands with gvconsole</p>
                                <pre class="brush: html">
                                  $> ./gvconsole
                                </pre>
                                
                                <p>That command will output:</p>
                                <pre class="brush: html">
                                
                                    -/*-/*-/*-/*-/*-/*-/* APPLICATION COMMANDS -/*-/*-/*-/*-/*-/*-/*
                                    clear-cache
                                    create-controller
                                    create-model
                                    create-user
                                    create-user-role
                                    create-user-role-action
                                    create-user-status
                                    disable-task
                                    doctrine
                                    doctrine-migrations
                                    enable-task
                                    generate-api-doc
                                    list-user-roles
                                    scheduler
                                    tests
                                    list-tasks

                                    -/*-/*-/*-/*-/*-/*-/* DEPENDENCY COMMANDS -/*-/*-/*-/*-/*-/*-/* 
                                    composer

                                    -/*-/*-/*-/*-/*-/*-/* BUILDING COMMANDS -/*-/*-/*-/*-/*-/*-/*
                                    build
                                    phpcs
                                    phpcbf
                                    -/*-/*-/*-/*-/*-/*-/* CONTAINER MANAGEMENT COMMANDS -/*-/*-/*-/*-/*-/*-/*
                                    start
                                    stop
                                    up
                                    down
                                    logs
                                    enter

                                </pre>
                                <p>We will go one by one, don't worry.</p>

                                <hr>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                        <div class="row">
                            <div class="col-md-5">
                                <h4 id="line3_1">Manage cache - <a href="#top">#back to top</a></h4>
                                <h5>$> ./gvconsole clear-cache</h5>
                                <p>In a typical gv application, the cache is going to be managed by redis, but redis is not mandatory, the strategy is, gv will ping redis, if this one is available it will be used, if not, the files cache strategy will be put in place.
                                <br/>If redis is not used, the cache will be stored in the var/cache/files/ directory. Note: this fallback can be changed on the config file.</p>
                            </div>
                            <!-- end col -->
                            <div class="col-md-7">
                              <pre class="brush: html">
                                ./gvconsole clear-cache
                                usage example: clear-cache 1
                                Please select the option:
                                --------------------------
                                1 - Flush all
                                2 - Flush config
                                3 - Flush routes
                                4 - Flush translations
                                5 - Flush controller names
                                --------------------------
                              </pre>
                            </div>
                        </div>
                        <!-- end row -->

                        <hr>

                        <div class="row">
                            <div class="col-md-5">
                                <h4 id="line3_2">Create controllers - <a href="#top">#back to top</a></h4>
                                <p>The create controller that will help you to create your controller in the correct path, and extending the correct base class. Parameters are: class name and method names separated by space</p>
                            </div>
                            <!-- end col -->
                            <div class="col-md-7">
                              <pre class="brush: html">
                                ./gvconsole create-controller
                                usage example: ./gvconsole create-controller Cars \
                                list create update delete
                              </pre>
                            </div>

                        </div>
                        <!-- end row -->

                        <hr>

                        <div class="row">
                            <div class="col-md-12">
                                <h4 id="line3_3">Create models - <a href="#top">#back to top</a></h4>
                                <p>The create models command will guide you thorgh the process, doctrine is used as the ORM for GV so please, if you haven't heard about it <a href="http://docs.doctrine-project.org/en/latest/">read the documentation</a>.</p>
                                <p>Usage:</p>
                                <pre class="brush: html">
                                  ./gvconsole create-model
                                </pre>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                        <hr>
                        <div class="row">
                            <div>
                                <h4 id="line3_4">Database management - <a href="#top">#back to top</a></h4>
                                <p>GV uses doctrine as the defacto ORM, to execute the doctrine commands, run:</p>
                                <pre class="brush: html">
                                  ./gvconsole doctrine
                                </pre>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->
                        <div class="row">
                            <p>Please if you have doubts about doctrine, read <a href="http://docs.doctrine-project.org/en/latest/">their documentation</a>.</p>
                            <pre class="brush: html">
                              ./gvconsole doctrine
                              #!/usr/bin/env php
                              Doctrine Command Line Interface version 2.4.8

                              Usage:
                                command [options] [arguments]

                              Options:
                                -h, --help            Display this help message
                                -q, --quiet           Do not output any message
                                -V, --version         Display this application version
                                    --ansi            Force ANSI output
                                    --no-ansi         Disable ANSI output
                                -n, --no-interaction  Do not ask any interactive question
                                -v|vv|vvv, --verbose  Increase the verbosity of messages: 1 for normal output, 2 for more verbose output and 3 for debug

                              Available commands:
                                help                            Displays help for a command
                                list                            Lists commands
                               dbal
                                dbal:import                     Import SQL file(s) directly to Database.
                                dbal:run-sql                    Executes arbitrary SQL directly from the command line.
                               orm
                                orm:clear-cache:metadata        Clear all metadata cache of the various cache drivers.
                                orm:clear-cache:query           Clear all query cache of the various cache drivers.
                                orm:clear-cache:result          Clear all result cache of the various cache drivers.
                                orm:convert-d1-schema           Converts Doctrine 1.X schema into a Doctrine 2.X schema.
                                orm:convert-mapping             Convert mapping information between supported formats.
                                orm:convert:d1-schema           Converts Doctrine 1.X schema into a Doctrine 2.X schema.
                                orm:convert:mapping             Convert mapping information between supported formats.
                                orm:ensure-production-settings  Verify that Doctrine is properly configured for a production environment.
                                orm:generate-entities           Generate entity classes and method stubs from your mapping information.
                                orm:generate-proxies            Generates proxy classes for entity classes.
                                orm:generate-repositories       Generate repository classes from your mapping information.
                                orm:generate:entities           Generate entity classes and method stubs from your mapping information.
                                orm:generate:proxies            Generates proxy classes for entity classes.
                                orm:generate:repositories       Generate repository classes from your mapping information.
                                orm:info                        Show basic information about all mapped entities
                                orm:run-dql                     Executes arbitrary DQL directly from the command line.
                                orm:schema-tool:create          Processes the schema and either create it directly on EntityManager Storage Connection or generate the SQL output.
                                orm:schema-tool:drop            Drop the complete database schema of EntityManager Storage Connection or generate the corresponding SQL output.
                                orm:schema-tool:update          Executes (or dumps) the SQL needed to update the database schema to match the current mapping metadata.
                            </pre>
                            <!-- end col -->
                            <br/>
                            <br/>
                            <p>For using doctrine migrations, those are going to be put under resources/migrations/ directory</p>
                            <p>The command to be run to manage migrations is ./gvconsole doctrine-migrations</p>
                            <pre class="brush: html">
                              ./gvconsole doctrine-migrations
                              #!/usr/bin/env php
                              Doctrine Migrations version v1.5.0

                              Usage:
                                command [options] [arguments]

                              Options:
                                -h, --help            Display this help message
                                -q, --quiet           Do not output any message
                                -V, --version         Display this application version
                                    --ansi            Force ANSI output
                                    --no-ansi         Disable ANSI output
                                -n, --no-interaction  Do not ask any interactive question
                                -v|vv|vvv, --verbose  Increase the verbosity of messages: 1 for normal output, 2 for more verbose output and 3 for debug

                              Available commands:
                                help                   Displays help for a command
                                list                   Lists commands
                               migrations
                                migrations:diff        Generate a migration by comparing your current database to your mapping information.
                                migrations:execute     Execute a single migration version up or down manually.
                                migrations:generate    Generate a blank migration class.
                                migrations:latest      Outputs the latest version number
                                migrations:migrate     Execute a migration to a specified version or the latest available version.
                                migrations:status      View the status of a set of migrations.
                                migrations:up-to-date  Tells you if your schema is up-to-date.
                                migrations:version     Manually add and delete migration versions from the version table.
                            </pre>
                        </div>

                        <hr>

                        <div class="row">
                            <div class="col-md-5">
                                <h4 id="line3_5">Unit tests - <a href="#top">#back to top</a></h4>
                                <p>Unit tests are created under the tests directory in the root of the project, Phpunit is used for them.
                                if you have any doubt please read <a href="https://phpunit.de/documentation.html">their documentation</a>.</p>
                                <p>To run unit tests, please use ./gvconsole phpunit</p>
                            </div>
                            <!-- end col -->
                            <div class="col-md-7">
                              <pre class="brush: html">
                                ./gvconsole phpunit
                              </pre>
                            </div>
                        </div>
                        <!-- end row -->

                        <hr>

                        <div class="row">
                            <div class="col-md-12">
                                <h4 id="line3_6">Using scheduled tasks - <a href="#top">#back to top</a></h4>
                                <p>The scheduled tasks are basically cron jobs that will execute your tasks on a specific moment in time.</p>
                                <p>GV will handle the setup for it you only need to focus on 3 things: create the task that you want to execute, enabling your task and disabling it if you want.</p>
                                <p>Tasks should be put in the tasks directory under Resources</p>
                                <img src="images/tree.png" alt="tasks marked">
                                <p>In your task you can do whatever is needed, for instance, could be, log amount of orders created, get information from an external system and save it into the database, run a mysql query, etc.</p>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                        <div class="row">
                            <div class="col-md-12">
                                <p>In order to enable your scheduled task use the gvconsole command:</p>
                                <pre class="brush: html">
                                  ./gvconsole enable-task \* \* \* \* \* {name of your task as you have it on your tasks folder, without the .php} {identifier for deletion}
                                </pre>
                                <p>If you are wondering what are the * in the command, please read <a href="https://www.computerhope.com/unix/ucrontab.htm">this</a>.</p>
                                <p>For example:</p>
                                <pre class="brush: html">
                                  ./gvconsole enable-task \* \* \* \* \* awesome-task aw3some
                                </pre>
                                <p>The selected task, in this case will run every minute, and will log a specific message through logger.</p>
                                <p>To remove a task use the gvconsole disable-task command, using the identifier when you enabled it.</p>
                                <pre class="brush: html">
                                  ./gvconsole disable-task aw3some
                                </pre>
                                <p>If you don't remember the identifier of a command use the gvconsole list-tasks command:</p>
                                <pre class="brush: html">
                                  ./gvconsole list-tasks
                                </pre>
                                <pre class="brush: html">
                                  $> ./gvconsole list-tasks
                                  * * * * * php resources/tasks/awesome-task.php >> var/log/cron.log #aw3some
                                </pre>
                                <p>All your tasks will log their output into the var/log/cron.log file</p>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                        <hr>

                        <div class="row">
                            <div class="col-md-12">
                                <h4 id="line3_7">Entering one of the docker containers - <a href="#top">#back to top</a></h4>
                                <p>To enter into any of the containers that gv provides you need to run:</p>
                                <pre class="brush: html">
                                    $> ./gvconsole enter {name_of_the_container}
                                </pre>
                                <p>The containers that gv creates by default are: gv_mysql_1, gv_redis_1, gv_nginx_1 and gv_php_1</p>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                        <div class="row">
                            <div class="col-md-12">
                                <h4 id="line3_7">checking logs - <a href="#top">#back to top</a></h4>
                                <p>To check logs on all containers at once just run</p>
                                <pre class="brush: html">
                                    $> ./gvconsole logs
                                </pre>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                        <div class="row">
                            <div class="col-md-12">
                                <h4 id="line3_7">User management through the command line - <a href="#top">#back to top</a></h4>
                                <p>You can create users, user roles and user role actions, for example:</p>
                                <pre class="brush: html">
                                    $> ./gvconsole create-user-role admin 10
                                    $> ./gvconsole create-user admin admin@admin.com complexPassword admin
                                    $> ./gvconsole create-user-role-action canpublish admin
                                </pre>
                                <p>We first create a new user role with the role name and a role priority (an integer defined by you) as a second parameter.</p>
                                <p>We then use the create-user command with: username, email, password and role name as parameters.</p>
                                <p>Lastly, and only if you want to use it on your application, we define a role action with a role name as a second parameter</p>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                        <div class="row">
                            <div class="col-md-12">
                                <h4 id="line3_7">Generate api documentation - <a href="#top">#back to top</a></h4>
                                <p>If you use <a>the openAPI standard</a> on your controllers you can generate the api docs with:</p>
                                <pre class="brush: html">
                                    $> ./gvconsole generate-api-doc
                                </pre>
                                <p>This will scan all your controllers and generate the api documentation, which will be under /doc </p>
                                <p>Note: the documentation is under basic authentication and you have to have a valid user to access it.</p>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                    </section>
                    <!-- end section -->

                    <section id="line4" class="section">
                    <div class="row">
                        <div class="col-md-12 left-align">
                            <h2 class="dark-text">How to's <a href="#top">#back to top</a><hr></h2>
                        </div>
                        <!-- end col -->
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <h4 id="line4_0">Validate the input of your request - <a href="#top">#back to top</a></h4>
                            <p>Let's imagine that you need to validate the input set from your HttpRequest. GV has a set of rules for you to do this very easily, following convention over configuration through the ControllerValidationAbstract class.</p>
                            <p>You could use a new Validation Object, which will be separated from anything else, and then use the validate() method. Look at the example below:</p>
                            <p>We have a method inside our Examples controller called login, this action expects to receive username and passoword fields.</p>
                            <p>We then need to Create a new class with the same controller name and method name but under the Validations directory, extending ControllerValidationAbstract like this:</p>
                            <img src="images/validations_example_directory_structure.png" />
                            <p>Then we need to implement the same method name we want to validate, in this case login() utilizing the protested "fields" property.</p>
                            <img src="images/validations_example.png" />
                            <p>Lastly inside your controller the only thing you need to do is $this->httpRequest->validate()</p>
                        </div>
                        <!-- end col -->
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <h4 id="line4_1">Validate a field - <a href="#top">#back to top</a></h4>
                            <p>Let's imagine that you need to validate a specific field that is comming from the request. In this case is will be the "email" field</p>
                            <p>In this field you need to validate a set of rules, first that the field is not empty, then that the field is a valid email string.</p>
                            <p>GV has a validation service for you to use and validate your fields. Usage:</p>
                            <img src="images/validation_usage.png" alt="validation usage">
                            <p>This will return true, false or throw an exception.</p>
                            <p>There are 3 validation strategies in place, you can add the ones that you need for your project extending the ValidationStrategyInterface, and hopefully send the pull request to the gv main repo :)</p>
                        </div>
                        <!-- end col -->
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <h4 id="line4_2">Manage http handling - <a href="#top">#back to top</a></h4>
                            <p>All the requests sent to a gv application will go through the index.php file located at the public folder, this is managed though the .htaccess file</p>
                            <p>Gv has a set of classes that are responsible of the http lifecycle, those are HttpRequest and HttpResponse. This two classes are already initialized and put into the main controller class.</p>
                            <img src="images/http-lifecycle.png" alt="" style="max-width: 100%;">
                            <p><u>HttpRequest</u></p>
                            <p>HttpRequest has the getParameter method that will return the fields wanted. For instance, inside a controller you can:</p>
                            <img src="images/request_getparameter.png" alt="http request">
                            <p>Within the HttpRequest You can also check the request method using isPost(), isGet(), isDelete(), isPut() and isPatch()</p>
                            <p>When you want to generate a response, you can use Any of the built-in response types: Response, JSONResponse, TransformerResponse or PrintErrorResponse</p>

                            <p><u>HttpResponse</u></p>
                            <p>In your controller you can setup your httpresponse, the default behavior will be:</p>
                            <p>The methods available in the HttpResponse class are:</p>
                            <img src="images/httpresponse-methods.png" alt="">
                            <p>You can add http method validation to your controllers, by using the @httpMethod annotation, as an example:</p>
                            <pre class="brush: html">
                                /**
                                * @httpMethod("GET")
                                */
                                public function view()
                                {
                                    //your code here
                                }
                              </pre>
                              <p>The above will validate that the actual request is of that method (in this case a get method)</p>
                              <p>Tip: you can use multiple Http methods in this annotation, for instance @httpMethod("GET", "POST", "PUT") </p>
                        </div>
                    </div>
                    
                    <br/><br/>
                    <div class="row">
                        <div class="col-md-12">
                            <h4 id="line4_3">Use an event - <a href="#top">#back to top</a></h4>
                            <p>GV includes an event mechanism ready to be used. This mechanism is composed by different parts.</p>
                            <h4>An event registry</h4>
                            <p>All your event listeners will need to be registered in this Class, inside GvEventListenerRegistry->registerEventListeners() method, GV will handle the relationships after it. For example:</p>
                            <img src="images/event-registry.png" alt="">
                            <br/><br/>
                            <h4>Events</h4>
                            <p>Your events must be created under the events folder, and they need to extend from GvEvent for instance:</p>
                            <img src="images/event.png" alt="">
                            <br/><br/>
                            <h4>Listeners</h4>
                            <p>Your listeners must implement EventListenerinterface and you must implement the handleEvent method that will be executed when the event is triggered. In the following example, the user will receive an email when the account is created, while devmode is not true.</p>
                            <img src="images/listener.png" alt="">
                            <br/><br/>
                            <h4>An event dispatcher</h4>
                            <p>The event dispatcher is the class that is going to dispatch the events that you need when you need it. For the sake of the example we will dispatch our event when a new user is created, the "CreateNewUserCommand"</p>
                            <img src="images/event-dispatcher.png" alt="">
                        </div>
                        <!-- end col -->
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <h4 id="line4_4">Create and execute a command - <a href="#top">#back to top</a></h4>
                            <p>GV includes a command pattern put in place for enforcing the hexagonal architecture and make your code frameworkless.</p>
                            <p>Your commands will need to implement CommandInterface, and you will need to implement the execute method. For example:</p>
                            <img src="images/command.png" alt="" />
                            <p>Then you need to execute the command where you think is needed:</p>
                            <img src="images/command-login.png" alt="">
                        </div>
                        <!-- end col -->
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <h4 id="line4_5">Unit tests - <a href="#top">#back to top</a></h4>
                        </div>
                        <!-- end col -->
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <h4 id="line4_6">Configure your project - <a href="#top">#back to top</a></h4>
                            <p>GV was built with the idea of not having uneeded configuration files, that's why you only need to configure only one small yml file. config.yml is in the config directory.</p>
                            <img src="images/config.png" alt="config">
                        </div>
                        <!-- end col -->
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <h4 id="line4_7">Overwrite a route - <a href="#top">#back to top</a></h4>
                            <p>If for some reason you want to avoid using the default url strategy of host/{controller}/{method} you can write your own url rewrite in the routes.yml file located at the config directory</p>
                            <p>The rules are, whatever you put between ":" will be counted as parameters of the http request, and then the action will be fowarded with {controller}->{method} follow the example</p>
                            <img src="images/routes.png" alt="routes">
                        </div>
                        <!-- end col -->
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <h4 id="line4_8">Return a specific HTTP Response - <a href="#top">#back to top</a></h4>
                            <p>GV comes with some pre-built Http response types: Response, JSONResponse, TransformerResponse, PrintErrorResponse</p>
                            <p>In your controller you just have to call $this->httpResponse->response() specifying which response you want. For example:</p>
                            <img src="images/default_response.png" alt="routes">
                        </div>
                        <!-- end col -->
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <h4 id="line4_9">One try catch to rule them all - <a href="#top">#back to top</a></h4>
                            <p>GV was done with ease in mind, every exception thrown will be catched by the application and depending on the state of the app two things can happen:</p>
                            <ul>
                                <li>If the application is in dev mode (the dev mode flag is true on the config.yml file) then the application will die showing the exception message</li>
                                <li>If the application is not in dev mode, then the application will log the error and redirect the uri to the root.</li>
                            </ul>

                            <p>As a good practice you can throw a GVException with parameters, that will be sent to the log through Logger.</p>
                        </div>
                        <!-- end col -->
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <h4 id="line4_10">Generate your own fractal transformer - <a href="#top">#back to top</a></h4>
                            <p>A fractal transformer is a way of present filtered and serialized data as output on the response of your Restful API</p>
                            <p>When calling httpResponse->response() method, you can pass a TransformerResponse object, which will take care of the rest.</p>

                            <p>The way to do this is extending the TransformerAbstract class, and pass your object on the constructor. In this new transformer class you need to overwrite the transform method. </p>
                            <p>Please not that your transformer object should be on src/Helpers/transformers/ directory.</p>
                            <p>The transform method should return an array containing exactly what you need to response. See the example below:</p>

                            <img src="images/transformer.png" />
                        </div>
                        <!-- end col -->
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <h4 id="line4_11">Use throttling - <a href="#top">#back to top</a></h4>
                            <p>Throttling will prevent DDOS or brute force attacks on your application, limiting the ammount of requests per second allowed on a given ip</p>
                            <p>Please note that for using throttling, your application has to use redis as the source of your cache.</p>

                            <p>The way of enabling throttling and the allowance is as easy as going into config/config.yml and change throttling value to true, as well as "allowed_requests_per_second" to the number you'd prefer.</p>
                        </div>
                        <!-- end col -->
                    </div>

                    </section>
                    <!-- end section -->

                    <section id="line5" class="section">

                            <div class="row">
                                <div class="col-md-12 left-align">
                                    <h2 class="dark-text">Debugging a gv application<a href="#top">#back to top</a><hr></h2>
                                </div>
                                <!-- end col -->
                            </div>
                            <!-- end row -->
    
                            <div class="row">
                                <div class="col-md-12">
                                    <p>Gv comes with xdebug to be used out of the box. You just need to check that the .docker/php.ini file has the needed lines for this not commented:</p>
                                    <img src="images/phpini.png" />
                                    <p>In this case it would be from line 7 to 12, also remember to configure your ide with the correct configuration. For instance on Visual Studio code:</p>
                                    <img src="images/xdebug_vsc.png" />
                                    <p>or in PHPStorm:</p>
                                    <img src="images/xdebug_phpstorm.png" />
                                    <p>You can obviously disable xdebug on the php.ini file</p>
                                </div>
                                <!-- end col -->
    
                            </div>
                            <!-- end row -->
    
                        </section>
                        <!-- end section -->

                    <section id="line6" class="section">

                        <div class="row">
                            <div class="col-md-12 left-align">
                                <h2 class="dark-text">Best practices <a href="#top">#back to top</a><hr></h2>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                        <div class="row">

                            <div class="col-md-12">
                                <p>General recommendations for your project</p>
                            </div>

                            <div class="col-md-12">
                                <h4 id="line5_1">General - <a href="#top">#top</a></h4>
                                <ul>
                                    <li><strong>Always use plural names for your controllers</strong> - for examples Cars.</li>
                                    <li><strong>If you want to use versions or categories for your API, just create a subdirectory inside the Controllers folder.</strong></li>
                                    <li><strong>Always use singular names for your models</strong> - for example Car.</li>
                                    <li><strong>Move your business logic to services</strong> - in that way you will isolate them and you will be able to treat them as ports and adapters.</li>
                                </ul>
                            </div>
                            <!-- end col -->

                        </div>
                        <!-- end row -->

                    </section>
                    <!-- end section -->

                    <section id="line7" class="section">

                        <div class="row">
                            <div class="col-md-12 left-align">
                                <h2 class="dark-text">Dependency Injection<a href="#top">#back to top</a><hr></h2>
                            </div>
                            <!-- end col -->
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <p>GV provides a way of using <a href="https://en.wikipedia.org/wiki/Dependency_injection">dependency injection</a> out of the box. This technique is based on inversion of control, giving the responsibility of the instatiation of the objects to the application based on rules.</p>
                                <p>The rules imposed in GV are three:</p>
                                <ul>
                                    <li>1 - Register your classes in ioc.yml, the order of the defined objects is important, if one object needs another to be instanciated, then the first object needs to be put on top of the second</li>
                                    <li>2 - If you need an object to be part of the constructor of another object, you can pass the reference with "@" and the id of the needed object or multiple objects as arguments</li>
                                    <li>3 - Inject your instances in your objects</li>
                                </ul>

                                <p>Let's take a look at an example</p>
                                <p>Inside the examples controller we can find the login method, inside it we can see that there's a call made to "getLoginCommand", all GvControllers have <a href="http://php.net/manual/en/language.oop5.magic.php">magic methods</a> implemented. Meaning that you can call <b>any ioc object from it's name</b></p>
                                <p>In this specific example, the object called is "loginCommand"</p>
                                <img src="images/di1.png" />
                                <p>you can use this example if you need to pass more than one object to inject in the constructor</p>
                                <img src="images/di_array_args.png" />

                                <p>Let's start taking a look at the ioc.yml</p>
                                <img src="images/di2.png" />
                                <ul>
                                    <li>2) The classPath is the first part of your namespace (without your className)</li>
                                    <li>3) The objects node is where all the definition of your objects will be placed.</li>
                                    <li>3.1) The direct node under objects is the id attached to the object that you define in this case the id for this object is "loginCommand"</li>
                                    <li>4) The name of your class</li>
                                    <li>5) you will use the arguments node to add all the needed arguments for your constructor. If you use the "@" key means that you are instantiating another object with that id to be used on the constructor. In this case, the userService will be used (from the services node)</li>
                                </ul>

                                <p>Other valid nodes in your objects are: parameters (if you want to initialize your object with specific parameters, and singleton, if you want only one instance of your object to live on the application lifecycle</p>
                                <p>Now let's take a look at the LogginCommand Class.</p>
                                <img src="images/di4.png" />

                                <p>We can identify 3 important things of this class:</p>
                                <ul>
                                    <li>The @Inject doc comment that will instanciate and inject the object got from ioc.yml</li>
                                    <li>There's no need of declaring the variables with the @Inject</li>
                                    <li>The auto-injection of the userService for the constructor (this is the relationship done with the "@"</li>
                                </ul>
                                
                                <p>Through this technique you can Inject objects within your objects through properties or in the constructor itself and forget about instantiation :)</p>
                            </div>
                        </div>
                        <!-- end row -->

                        <div class="row">

                            <div class="col-md-12">
                                <p>I am just a regular guy that wanted to contribute to the open source community. I hope you enjoy GV as much as I enjoyed building it.</p>
                                <p>You will find more information about me <a href="https://www.linkedin.com/in/guidovera/?locale=en_US">here</a>.</p>
                            </div>
                            <!-- end col -->

                        </div>
                        <!-- end row -->

                    </section>

                    <section id="line8" class="section">

                        <div class="row">
                          <div class="col-md-12 left-align">
                                <h2 class="dark-text">Who I am <a href="#top">#back to top</a><hr></h2>
                            </div>
                            <!-- end col -->
                        </div>
                        <!-- end row -->

                        <div class="row">

                            <div class="col-md-12">
                                <p>I am just a regular guy that wanted to contribute to the open source community. I hope you enjoy GV as much as I enjoyed building it.</p>
                                <p>You will find more information about me <a href="https://www.linkedin.com/in/guidovera/?locale=en_US">here</a>.</p>
                            </div>
                            <!-- end col -->

                        </div>
                        <!-- end row -->

                    </section>
                    <!-- end section -->
                </div>
                <!-- // end .col -->

            </div>
            <!-- // end .row -->

        </div>
        <!-- // end container -->

    </div>
    <!-- end wrapper -->

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/retina.js"></script>
    <script src="js/jquery.fitvids.js"></script>
    <script src="js/wow.js"></script>
    <script src="js/jquery.prettyPhoto.js"></script>

    <!-- CUSTOM PLUGINS -->
    <script src="js/custom.js"></script>
    <script src="js/main.js"></script>

    <script src="js/syntax-highlighter/scripts/shCore.js"></script>
    <script src="js/syntax-highlighter/scripts/shBrushXml.js"></script>
    <script src="js/syntax-highlighter/scripts/shBrushCss.js"></script>
    <script src="js/syntax-highlighter/scripts/shBrushJScript.js"></script>

</body>

</html>
